<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Robin Gabriel Design - 3D Design</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: Arial, Helvetica, sans-serif;
}

:root {
  --text-color: #000000;
  --background-color: #ffffff;
  --accent-color: #000000;
  --hover-color: rgba(200, 200, 200, 0.3);
  --transition-speed: 0.6s;
}

body {
  background-color: var(--background-color);
  color: var(--text-color);
  overflow: hidden;
  width: 100vw;
  height: 100vh;
  position: fixed;
}

/* Main Container with Slide Transitions */
#main-container {
  position: relative;
  width: 200vw;
  height: 100vh;
  display: flex;
  transition: transform var(--transition-speed) cubic-bezier(0.4, 0, 0.2, 1);
  transform: translateX(0);
}

#main-container.show-product {
  transform: translateX(-100vw);
}

/* Menu Screen */
#menu-screen {
  width: 100vw;
  height: 100vh;
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

/* Product Screen */
#product-screen {
  width: 100vw;
  height: 100vh;
  position: relative;
}

#container {
  position: relative;
  width: 100vw;
  height: 100vh;
  transition: all var(--transition-speed) ease;
}

#container:hover {
  background: radial-gradient(circle at var(--mouse-x) var(--mouse-y), 
              var(--hover-color), transparent 50%);
}

/* Desktop split layout */
#container.portfolio-mode,
#container.contact-mode {
  width: 50vw;
  transform: translateX(50vw);
}

/* Location Info */
.location-info {
  position: absolute;
  top: 24px;
  left: 24px;
  z-index: 10;
  font-size: 14px;
  opacity: 0.7;
  font-weight: normal;
  line-height: 1.2;
}

/* Navigation container */
.nav-container {
  position: absolute;
  top: 24px;
  right: 24px;
  display: flex;
  align-items: center;
  z-index: 10;
}

/* Brand title with hover menu */
.brand-container {
  position: relative;
  margin-right: 24px;
}

.brand-title {
  font-family: Arial, Helvetica, sans-serif;
  font-weight: normal;
  font-size: 16px;
  letter-spacing: 1px;
  color: var(--text-color);
  cursor: pointer;
  transition: opacity 0.3s, transform 0.3s;
  opacity: 0.8;
  padding: 8px 0;
  text-transform: uppercase;
}

.brand-title:hover {
  opacity: 1;
  transform: translateY(-2px);
}

/* Vertical navigation menu */
.nav-menu {
  position: absolute;
  top: 100%;
  left: 0;
  margin-top: 0;
  padding-top: 5px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  opacity: 0;
  transform: translateY(-10px);
  pointer-events: none;
  transition: opacity 0.3s ease, transform 0.3s ease;
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  border-radius: 8px;
  padding: 15px;
  min-width: 120px;
}

.brand-container:hover .nav-menu,
.brand-container.active .nav-menu {
  opacity: 1;
  transform: translateY(0);
  pointer-events: all;
}

.nav-menu:hover {
  opacity: 1;
  transform: translateY(0);
  pointer-events: all;
}

.nav-menu a {
  color: var(--text-color);
  text-decoration: none;
  font-size: 14px;
  letter-spacing: 1px;
  transition: opacity 0.3s, transform 0.3s;
  font-weight: normal;
  white-space: nowrap;
  cursor: pointer;
  padding: 8px 0;
}

.nav-menu a:hover {
  opacity: 0.7;
  transform: translateX(5px);
}

/* Back buttons */
.back-button {
  background: none;
  border: none;
  color: var(--text-color);
  font-size: 18px;
  cursor: pointer;
  transition: transform 0.3s;
  display: flex;
  align-items: center;
  justify-content: center;
}

.back-button:hover {
  transform: rotate(-180deg);
}

.back-icon {
  width: 18px;
  height: 18px;
  stroke: var(--text-color);
  fill: none;
  transition: all var(--transition-speed) ease;
}

/* Menu Content */
.menu-content {
  text-align: center;
  margin-top: -40px;
}

.menu-title {
  font-size: 48px;
  font-weight: normal;
  margin-bottom: 60px;
  letter-spacing: 2px;
  text-transform: uppercase;
}

.shoe-grid {
  display: flex;
  gap: 80px;
  justify-content: center;
  align-items: center;
  flex-wrap: wrap;
}

.shoe-option {
  font-size: 72px;
  font-weight: normal;
  cursor: pointer;
  transition: all 0.3s ease;
  opacity: 0.6;
  user-select: none;
  padding: 20px;
  border-radius: 12px;
}

.shoe-option:hover {
  opacity: 1;
  transform: scale(1.1);
  background: rgba(0, 0, 0, 0.05);
}

/* Date Display */
.date-display {
  position: absolute;
  bottom: 24px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 14px;
  opacity: 0.7;
  z-index: 10;
  text-align: center;
  width: 90%;
  max-width: 500px;
  font-weight: normal;
}

#loading {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: var(--background-color);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 1000;
  color: var(--text-color);
  gap: 20px;
}

.spinner {
  width: 40px;
  height: 40px;
  border: 3px solid rgba(0, 0, 0, 0.3);
  border-radius: 50%;
  border-top-color: var(--text-color);
  animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* 3D Canvas */
#model-canvas {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: white;
}

/* Color & Material Panel - FIXED VISIBILITY */
.color-material-panel {
  position: fixed;
  bottom: 70px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px);
  border-radius: 16px;
  padding: 12px 20px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
  border: 1px solid rgba(0, 0, 0, 0.1);
  z-index: 15;
  display: none; /* Hidden by default */
  align-items: center;
  gap: 20px;
  max-width: 90vw;
  min-height: 50px;
}

/* Show panel when in product view */
.color-material-panel.visible {
  display: flex !important;
}

/* Color Section */
.color-section {
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 150px;
  flex-shrink: 0;
}

.color-area {
  width: 40px;
  height: 40px;
  background: linear-gradient(to bottom, transparent, #000), 
              linear-gradient(to right, #fff, #0f0);
  border-radius: 6px;
  position: relative;
  cursor: crosshair;
  box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.1);
  flex-shrink: 0;
}

.color-slider {
  width: 60px;
  height: 12px;
  background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
  border-radius: 6px;
  position: relative;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  flex-shrink: 0;
}

.color-thumb {
  width: 12px;
  height: 12px;
  border: 2px solid #fff;
  border-radius: 50%;
  position: absolute;
  transform: translate(-50%, -50%);
  box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  pointer-events: none;
  top: 50%;
  left: 50%;
}

.color-swatch {
  width: 24px;
  height: 24px;
  border-radius: 4px;
  border: 2px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  flex-shrink: 0;
  background-color: #cccccc;
}

/* Material Controls */
.material-section {
  display: flex;
  align-items: center;
  gap: 15px;
  flex-shrink: 0;
}

.control-group {
  display: flex;
  align-items: center;
  gap: 6px;
  min-width: 80px;
}

.control-label {
  font-size: 9px;
  font-weight: 500;
  color: #666;
  text-transform: uppercase;
  letter-spacing: 0.3px;
  min-width: 45px;
  white-space: nowrap;
}

.control-slider {
  width: 50px;
  height: 3px;
  border-radius: 2px;
  background: #e0e0e0;
  outline: none;
  -webkit-appearance: none;
  cursor: pointer;
}

.control-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: #000;
  cursor: pointer;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.control-slider::-moz-range-thumb {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: #000;
  cursor: pointer;
  border: none;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.control-value {
  font-size: 8px;
  font-weight: 600;
  color: #333;
  background: rgba(0, 0, 0, 0.05);
  padding: 2px 4px;
  border-radius: 3px;
  min-width: 20px;
  text-align: center;
  white-space: nowrap;
}

/* Mobile Responsive Design */
@media (max-width: 768px) {
  body {
    position: fixed;
    overflow: hidden;
    height: 100vh;
    width: 100vw;
  }

  /* Disable desktop split layout on mobile */
  #container.portfolio-mode,
  #container.contact-mode {
    width: 100vw !important;
    transform: none !important;
  }

  /* Mobile Navigation */
  .nav-container {
    position: fixed;
    top: 15px;
    right: 15px;
    z-index: 20;
  }

  .brand-container {
    margin-right: 0;
  }

  .brand-title {
    font-size: 11px;
    padding: 6px 10px;
    letter-spacing: 0.5px;
    line-height: 1.2;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(10px);
    border-radius: 6px;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .nav-menu {
    padding: 10px;
    min-width: 100px;
    gap: 6px;
    border-radius: 6px;
    right: 0;
    left: auto;
  }

  .nav-menu a {
    font-size: 9px;
    padding: 4px 0;
    letter-spacing: 0.3px;
  }

  /* Mobile Location Info */
  .location-info {
    position: fixed;
    top: 15px;
    left: 15px;
    z-index: 20;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(10px);
    border-radius: 6px;
    border: 1px solid rgba(0, 0, 0, 0.1);
    padding: 6px 10px;
    font-size: 11px;
    line-height: 1.2;
    letter-spacing: 0.3px;
  }

  /* Mobile Date Display */
  .date-display {
    position: fixed;
    bottom: 15px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 10px;
    z-index: 20;
    width: 90%;
    max-width: 250px;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(10px);
    border-radius: 6px;
    border: 1px solid rgba(0, 0, 0, 0.1);
    padding: 6px 12px;
    letter-spacing: 0.3px;
  }
  
  .menu-title {
    font-size: 32px;
    margin-bottom: 40px;
    letter-spacing: 1.5px;
  }
  
  .shoe-grid {
    gap: 40px;
  }
  
  .shoe-option {
    font-size: 48px;
    padding: 15px;
  }
  
  /* Mobile Color & Material Panel */
  .color-material-panel {
    bottom: 55px;
    padding: 8px 15px;
    gap: 12px;
    border-radius: 12px;
    max-width: 95vw;
    min-height: 40px;
  }

  .color-section {
    gap: 8px;
    min-width: 110px;
  }

  .color-area {
    width: 30px;
    height: 30px;
    border-radius: 4px;
  }

  .color-slider {
    width: 50px;
    height: 10px;
    border-radius: 5px;
  }

  .color-thumb {
    width: 8px;
    height: 8px;
    border: 1px solid #fff;
  }

  .color-swatch {
    width: 18px;
    height: 18px;
    border-radius: 3px;
  }

  .material-section {
    gap: 10px;
  }

  .control-group {
    gap: 4px;
    min-width: 65px;
  }

  .control-label {
    font-size: 7px;
    min-width: 35px;
    letter-spacing: 0.2px;
  }

  .control-slider {
    width: 40px;
    height: 2px;
  }

  .control-slider::-webkit-slider-thumb {
    width: 8px;
    height: 8px;
  }

  .control-value {
    font-size: 6px;
    padding: 1px 3px;
    min-width: 16px;
  }
}

@media (max-width: 480px) {
  .nav-container {
    top: 12px;
    right: 12px;
  }

  .location-info {
    top: 12px;
    left: 12px;
    padding: 5px 8px;
    font-size: 10px;
  }

  .brand-title {
    font-size: 10px;
    padding: 5px 8px;
  }

  .date-display {
    bottom: 12px;
    font-size: 9px;
    padding: 5px 10px;
  }

  .shoe-grid {
    gap: 30px;
  }

  .shoe-option {
    font-size: 40px;
    padding: 12px;
  }
  
  .color-material-panel {
    bottom: 45px;
    padding: 6px 12px;
    gap: 10px;
    max-width: 98vw;
    min-height: 35px;
  }

  .color-section {
    gap: 6px;
    min-width: 90px;
  }

  .color-area {
    width: 26px;
    height: 26px;
  }

  .color-slider {
    width: 40px;
    height: 8px;
  }

  .color-swatch {
    width: 16px;
    height: 16px;
  }

  .material-section {
    gap: 8px;
  }

  .control-group {
    gap: 3px;
    min-width: 55px;
  }

  .control-label {
    font-size: 6px;
    min-width: 30px;
  }

  .control-slider {
    width: 32px;
  }

  .control-value {
    font-size: 5px;
    min-width: 14px;
  }
}

/* Ensure no scrolling on mobile */
@media (max-width: 768px) {
  html, body {
    overflow: hidden;
    position: fixed;
    height: 100vh;
    width: 100vw;
  }

  #main-container {
    overflow: hidden;
  }
}

/* Desktop panels and modals */
.modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: 100;
  padding: 40px 20px 20px;
  overflow-y: auto;
}

.modal-content {
  max-width: 900px;
  margin: 0 auto;
  color: var(--text-color);
  background: rgba(255, 255, 255, 0.1);
  padding: 30px;
  border-radius: 10px;
  backdrop-filter: blur(5px);
}

.modal-content h1 {
  font-size: 24px;
  margin-bottom: 20px;
  font-weight: normal;
}

.modal-content p {
  font-size: 16px;
  line-height: 1.6;
  margin-bottom: 20px;
  font-weight: normal;
}

.close-button {
  position: absolute;
  top: 20px;
  right: 20px;
  background: none;
  border: none;
  color: var(--text-color);
  font-size: 24px;
  cursor: pointer;
  z-index: 101;
}

.portfolio-panel,
.contact-panel {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 50vw;
  height: 100vh;
  background: var(--background-color);
  z-index: 50;
  padding: 40px;
  overflow-y: auto;
  border-right: 1px solid var(--text-color);
}

.portfolio-panel.active,
.contact-panel.active {
  display: block;
}

.portfolio-close,
.contact-close {
  position: absolute;
  top: 20px;
  right: 20px;
  background: none;
  border: none;
  color: var(--text-color);
  font-size: 24px;
  cursor: pointer;
  z-index: 101;
}

#password-section,
#portfolio-password-section {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  text-align: center;
}

#password-section h1,
#portfolio-password-section h1 {
  font-size: 18px;
  margin-bottom: 20px;
  font-weight: normal;
}

.password-form {
  display: flex;
  flex-direction: column;
  gap: 15px;
  align-items: center;
  max-width: 250px;
  width: 100%;
}

.password-input {
  background: rgba(0, 0, 0, 0.1);
  border: 1px solid var(--text-color);
  color: var(--text-color);
  padding: 8px 16px;
  font-size: 14px;
  font-family: Arial, Helvetica, sans-serif;
  border-radius: 5px;
  width: 100%;
  text-align: center;
  font-weight: normal;
}

.password-input::placeholder {
  color: rgba(0, 0, 0, 0.5);
}

.password-submit {
  background: var(--text-color);
  color: var(--background-color);
  border: none;
  padding: 8px 20px;
  font-size: 12px;
  font-family: Arial, Helvetica, sans-serif;
  cursor: pointer;
  border-radius: 5px;
  transition: opacity 0.3s;
  font-weight: normal;
}

.password-submit:hover {
  opacity: 0.8;
}

.error-message {
  color: #ff4444;
  font-size: 12px;
  text-align: center;
  font-weight: normal;
}

.portfolio-gallery {
  width: 100%;
  max-height: 80vh;
  overflow-y: auto;
  margin-top: 20px;
  border-radius: 10px;
  background: var(--background-color);
  border: 1px solid var(--text-color);
  padding: 20px;
}

.portfolio-image {
  width: 100%;
  height: auto;
  margin-bottom: 20px;
  border-radius: 5px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s ease;
}

.portfolio-image:hover {
  transform: scale(1.02);
}

.portfolio-image:last-child {
  margin-bottom: 0;
}

.contact-links {
  display: flex;
  flex-direction: column;
  gap: 15px;
  margin-top: 20px;
}

.contact-link {
  color: var(--text-color);
  text-decoration: none;
  font-size: 16px;
  transition: opacity 0.3s, transform 0.3s;
  display: flex;
  align-items: center;
  gap: 10px;
  font-weight: normal;
}

.contact-link:hover {
  opacity: 0.7;
  transform: translateX(5px);
}
</style>
</head>
<body>

<div id="loading">
  <div class="spinner"></div>
  <div>Loading 3D Design...</div>
</div>

<div id="main-container">
  <!-- Menu Screen -->
  <div id="menu-screen">
    <div class="location-info">
      <div class="city">Loading location...</div>
    </div>

    <div class="nav-container">
      <div class="brand-container">
        <div class="brand-title">Robin Gabriel Design</div>
        <div class="nav-menu">
          <a href="#contact">CONTACT</a>
          <a href="#work">PRIVATE PORTFOLIO</a>
          <a href="index.html">HOME</a>
        </div>
      </div>
      <button class="back-button" id="back-home" aria-label="Back to home">
        <svg class="back-icon" viewBox="0 0 24 24" width="18" height="18">
          <path d="M19 12H5"></path>
          <path d="M12 19l-7-7 7-7"></path>
        </svg>
      </button>
    </div>
    
    <div class="menu-content">
      <h1 class="menu-title">Footwear</h1>
      <div class="shoe-grid">
        <div class="shoe-option" data-model="SL01">01</div>
        <div class="shoe-option" data-model="SL02">02</div>
        <div class="shoe-option" data-model="SL03">03</div>
        <div class="shoe-option" data-model="SL04">04</div>
        <div class="shoe-option" data-model="SL05">05</div>
      </div>
    </div>
    
    <div class="date-display"></div>
  </div>

  <!-- Product Screen -->
  <div id="product-screen">
    <div id="container">
      <div class="location-info">
        <div class="city">Loading location...</div>
      </div>

      <div class="nav-container">
        <div class="brand-container">
          <div class="brand-title">Robin Gabriel Design</div>
          <div class="nav-menu">
            <a href="#contact">CONTACT</a>
            <a href="#work">PRIVATE PORTFOLIO</a>
            <a href="index.html">HOME</a>
          </div>
        </div>
        <button class="back-button" id="back-to-menu" aria-label="Back to menu">
          <svg class="back-icon" viewBox="0 0 24 24" width="18" height="18">
            <path d="M19 12H5"></path>
            <path d="M12 19l-7-7 7-7"></path>
          </svg>
        </button>
      </div>

      <!-- 3D Canvas -->
      <canvas id="model-canvas"></canvas>

      <div class="date-display"></div>
    </div>
  </div>
</div>

<!-- Color & Material Panel - Fixed positioning -->
<div class="color-material-panel" id="color-material-panel">
  <!-- Color Section -->
  <div class="color-section">
    <div class="color-area" id="color-area">
      <div class="color-thumb" id="area-thumb"></div>
    </div>
    <div class="color-slider" id="color-slider">
      <div class="color-thumb" id="slider-thumb"></div>
    </div>
    <div class="color-swatch" id="color-swatch"></div>
  </div>

  <!-- Material Section -->
  <div class="material-section">
    <div class="control-group">
      <span class="control-label">Smoothness</span>
      <input type="range" class="control-slider" id="smoothness-slider" min="0" max="100" value="50">
      <span class="control-value" id="smoothness-value">50%</span>
    </div>
    <div class="control-group">
      <span class="control-label">Metalness</span>
      <input type="range" class="control-slider" id="metalness-slider" min="0" max="100" value="0">
      <span class="control-value" id="metalness-value">0%</span>
    </div>
  </div>
</div>

<!-- Desktop Contact Panel -->
<div id="contact-panel" class="contact-panel">
  <button class="contact-close">&times;</button>
  <div id="contact-content">
    <h1>Contact</h1>
    <p>Get in touch with Robin Gabriel Design</p>
    <div class="contact-links">
      <a href="mailto:robingabrieldesign@gmail.com" class="contact-link">
        <span>📧</span>
        <span>robingabrieldesign@gmail.com</span>
      </a>
      <a href="https://www.instagram.com/robingabrieldesign/" target="_blank" class="contact-link">
        <span>📷</span>
        <span>@robingabrieldesign</span>
      </a>
    </div>
  </div>
</div>

<!-- Desktop Portfolio Panel -->
<div id="portfolio-panel" class="portfolio-panel">
  <button class="portfolio-close">&times;</button>
  <div id="portfolio-password-section">
    <h1>Enter Password</h1>
    <div class="password-form">
      <input type="password" id="portfolio-password" class="password-input" placeholder="Enter password">
      <button id="portfolio-submit" class="password-submit">ACCESS</button>
      <div id="portfolio-error" class="error-message" style="display: none;">Incorrect password</div>
    </div>
  </div>
  <div id="portfolio-content" style="display: none;">
    <h1>Portfolio</h1>
    <div class="portfolio-gallery">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_01 Large.jpeg" alt="Portfolio Page 1" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_03 Large.jpeg" alt="Portfolio Page 3" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_04 Large.jpeg" alt="Portfolio Page 4" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_05 Large.jpeg" alt="Portfolio Page 5" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_06 Large.jpeg" alt="Portfolio Page 6" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_07 Large.jpeg" alt="Portfolio Page 7" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_08 Large.jpeg" alt="Portfolio Page 8" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_09 Large.jpeg" alt="Portfolio Page 9" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_10 Large.jpeg" alt="Portfolio Page 10" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_11 Large.jpeg" alt="Portfolio Page 11" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_12 Large.jpeg" alt="Portfolio Page 12" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_13 Large.jpeg" alt="Portfolio Page 13" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_14 Large.jpeg" alt="Portfolio Page 14" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_15 Large.jpeg" alt="Portfolio Page 15" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_16 Large.jpeg" alt="Portfolio Page 16" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_17 Large.jpeg" alt="Portfolio Page 17" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_18 Large.jpeg" alt="Portfolio Page 18" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_19 Large.jpeg" alt="Portfolio Page 19" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_20 Large.jpeg" alt="Portfolio Page 20" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_21 Large.jpeg" alt="Portfolio Page 21" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_22 Large.jpeg" alt="Portfolio Page 22" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_23 Large.jpeg" alt="Portfolio Page 23" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_24 Large.jpeg" alt="Portfolio Page 24" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_25 Large.jpeg" alt="Portfolio Page 25" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_26 Large.jpeg" alt="Portfolio Page 26" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_27 Large.jpeg" alt="Portfolio Page 27" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_28 Large.jpeg" alt="Portfolio Page 28" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_29 Large.jpeg" alt="Portfolio Page 29" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_30 Large.jpeg" alt="Portfolio Page 30" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_31 Large.jpeg" alt="Portfolio Page 31" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_32 Large.jpeg" alt="Portfolio Page 32" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_33 Large.jpeg" alt="Portfolio Page 33" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_34 Large.jpeg" alt="Portfolio Page 34" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_35 Large.jpeg" alt="Portfolio Page 35" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_36 Large.jpeg" alt="Portfolio Page 36" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_37 Large.jpeg" alt="Portfolio Page 37" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_38 Large.jpeg" alt="Portfolio Page 38" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_39 Large.jpeg" alt="Portfolio Page 39" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_40 Large.jpeg" alt="Portfolio Page 40" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_41 Large.jpeg" alt="Portfolio Page 41" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_42 Large.jpeg" alt="Portfolio Page 42" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_43 Large.jpeg" alt="Portfolio Page 43" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_44 Large.jpeg" alt="Portfolio Page 44" class="portfolio-image">
      <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_45 Large.jpeg" alt="Portfolio Page 45" class="portfolio-image">
    </div>
  </div>
</div>

<!-- Load Three.js and FBX Loader -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/FBXLoader.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/libs/fflate.min.js"></script>

<script>
// Enhanced 3D Design Application with Working Color Controls
document.addEventListener('DOMContentLoaded', () => {
  console.log('Enhanced 3D Design page loaded with Working Color Controls');
  
  // Global variables
  let scene, camera, renderer, controls;
  let currentModel = null;
  let currentColor = new THREE.Color(0.8, 0.8, 0.8);
  let hue = 120, saturation = 0.5, lightness = 0.7;
  let isMobile = window.innerWidth < 768;
  let isPortfolioOpen = false;
  let isContactOpen = false;
  let isInProductView = false;
  
  // DOM elements
  const mainContainer = document.getElementById('main-container');
  const loadingElement = document.getElementById('loading');
  const cityElements = document.querySelectorAll('.city');
  const dateElements = document.querySelectorAll('.date-display');
  const backHome = document.getElementById('back-home');
  const backToMenu = document.getElementById('back-to-menu');
  const modelCanvas = document.getElementById('model-canvas');
  const container = document.getElementById('container');
  const portfolioPanel = document.getElementById('portfolio-panel');
  const contactPanel = document.getElementById('contact-panel');
  const shoeOptions = document.querySelectorAll('.shoe-option');
  const colorMaterialPanel = document.getElementById('color-material-panel');
  
  // Initialize
  init();
  
  function init() {
    checkMobile();
    initScene();
    initColorPicker();
    initMaterialControls();
    initEventListeners();
    getUserLocation();
    
    // Hide loading after initialization
    setTimeout(() => {
      loadingElement.style.display = 'none';
    }, 1000);
  }
  
  function checkMobile() {
    isMobile = window.innerWidth < 768;
    console.log(`Device detected as ${isMobile ? 'mobile' : 'desktop'}`);
  }
  
  function showProductView(modelName) {
    isInProductView = true;
    mainContainer.classList.add('show-product');
    
    // Show color and material panel
    colorMaterialPanel.classList.add('visible');
    
    // Load the selected model
    loadFBXModel(modelName);
    
    // Start animation loop
    animate();
    
    console.log(`Showing product view for ${modelName}`);
  }
  
  function showMenuView() {
    isInProductView = false;
    mainContainer.classList.remove('show-product');
    
    // Hide color and material panel
    colorMaterialPanel.classList.remove('visible');
    
    // Remove current model
    if (currentModel) {
      scene.remove(currentModel);
      currentModel = null;
    }
    
    console.log('Showing menu view');
  }
  
  function initScene() {
    // Scene with white background
    scene = new THREE.Scene();
    scene.background = new THREE.Color(0xffffff);
    
    // Camera
    const aspect = window.innerWidth / window.innerHeight;
    camera = new THREE.PerspectiveCamera(75, aspect, 0.1, 1000);
    camera.position.set(2, 1, 3);
    
    // Renderer
    renderer = new THREE.WebGLRenderer({ 
      canvas: modelCanvas,
      antialias: true 
    });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    renderer.shadowMap.enabled = true;
    renderer.shadowMap.type = THREE.PCFSoftShadowMap;
    renderer.toneMapping = THREE.ACESFilmicToneMapping;
    renderer.toneMappingExposure = 1.2;
    
    // Enhanced lighting setup
    const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
    scene.add(ambientLight);
    
    const directionalLight = new THREE.DirectionalLight(0xffffff, 1.2);
    directionalLight.position.set(5, 5, 5);
    directionalLight.castShadow = true;
    directionalLight.shadow.mapSize.width = 2048;
    directionalLight.shadow.mapSize.height = 2048;
    scene.add(directionalLight);
    
    const rimLight = new THREE.DirectionalLight(0xffffff, 0.4);
    rimLight.position.set(-5, 0, -5);
    scene.add(rimLight);

    // Add fill light for better material visibility
    const fillLight = new THREE.DirectionalLight(0xffffff, 0.3);
    fillLight.position.set(0, -5, 2);
    scene.add(fillLight);
    
    // Controls
    controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;
    controls.dampingFactor = 0.05;
    controls.autoRotate = true;
    controls.autoRotateSpeed = 0.3;
    controls.enableZoom = true;
    controls.enablePan = false;
    controls.minDistance = 1;
    controls.maxDistance = 8;
    
    console.log('Enhanced scene initialized');
  }
  
  function loadFBXModel(modelName) {
    console.log(`Loading FBX model: ${modelName}`);
    
    // Show loading
    const modelLoading = document.createElement('div');
    modelLoading.style.cssText = `
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(255, 255, 255, 0.95);
      padding: 20px 30px;
      border-radius: 15px;
      z-index: 100;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      font-size: 14px;
      font-weight: 500;
    `;
    modelLoading.textContent = `Loading ${modelName}...`;
    document.body.appendChild(modelLoading);
    
    // Remove existing model
    if (currentModel) {
      scene.remove(currentModel);
      currentModel = null;
    }
    
    // Load FBX model
    const loader = new THREE.FBXLoader();
    const modelPath = `3D WORK/${modelName}.fbx`;
    
    loader.load(
      modelPath,
      (fbx) => {
        console.log(`${modelName} loaded successfully`);
        
        // Remove loading indicator
        if (document.body.contains(modelLoading)) {
          document.body.removeChild(modelLoading);
        }
        
        // Process the loaded model
        currentModel = fbx;
        
        // Scale and position the model
        currentModel.scale.setScalar(0.01);
        currentModel.position.set(0, -1, 0);
        
        // Apply enhanced materials and colors (NO TRANSPARENCY)
        currentModel.traverse((child) => {
          if (child.isMesh) {
            child.material = new THREE.MeshStandardMaterial({
              color: currentColor,
              metalness: 0.1,
              roughness: 0.6,
              envMapIntensity: 1.0,
              transparent: false,  // NO TRANSPARENCY
              opacity: 1.0         // ALWAYS OPAQUE
            });
            child.castShadow = true;
            child.receiveShadow = true;
          }
        });
        
        scene.add(currentModel);
        
        console.log(`${modelName} added to scene`);
      },
      (progress) => {
        console.log('Loading progress:', (progress.loaded / progress.total * 100) + '%');
      },
      (error) => {
        console.error(`Error loading ${modelName}:`, error);
        
        if (document.body.contains(modelLoading)) {
          document.body.removeChild(modelLoading);
        }
        
        console.log('Creating enhanced fallback geometry');
        createEnhancedFallbackModel(modelName);
      }
    );
  }
  
  function createEnhancedFallbackModel(modelName) {
    const group = new THREE.Group();
    
    // Create different shoe designs based on model number
    const modelNumber = parseInt(modelName.replace('SL', ''));
    
    switch(modelNumber) {
      case 1:
        createSneakerModel(group);
        break;
      case 2:
        createRunningShoeModel(group);
        break;
      case 3:
        createBootModel(group);
        break;
      case 4:
        createDressShoeModel(group);
        break;
      case 5:
        createHighTopModel(group);
        break;
      default:
        createSneakerModel(group);
    }
    
    currentModel = group;
    scene.add(currentModel);
    
    console.log(`Enhanced fallback model ${modelName} created`);
  }
  
  function createSneakerModel(group) {
    // Main shoe body
    const mainGeometry = new THREE.CapsuleGeometry(0.4, 2.0, 12, 24);
    const mainMaterial = new THREE.MeshStandardMaterial({
      color: currentColor,
      metalness: 0.1,
      roughness: 0.6,
      envMapIntensity: 1.0,
      transparent: false,
      opacity: 1.0
    });
    const mainMesh = new THREE.Mesh(mainGeometry, mainMaterial);
    mainMesh.rotation.z = Math.PI / 2;
    mainMesh.scale.set(1, 1, 0.7);
    group.add(mainMesh);
    
    // Sole
    const soleGeometry = new THREE.BoxGeometry(2.2, 0.15, 0.8);
    const soleMaterial = new THREE.MeshStandardMaterial({
      color: 0x333333,
      metalness: 0.1,
      roughness: 0.9,
      transparent: false,
      opacity: 1.0
    });
    const sole = new THREE.Mesh(soleGeometry, soleMaterial);
    sole.position.set(0, -0.4, 0);
    group.add(sole);
    
    // Laces
    for (let i = 0; i < 6; i++) {
      const laceGeometry = new THREE.CylinderGeometry(0.02, 0.02, 0.3, 6);
      const laceMaterial = new THREE.MeshStandardMaterial({
        color: 0x444444,
        metalness: 0.2,
        roughness: 0.8,
        transparent: false,
        opacity: 1.0
      });
      const lace = new THREE.Mesh(laceGeometry, laceMaterial);
      lace.position.set(-0.6 + (i * 0.2), 0.2, 0.35);
      lace.rotation.x = Math.PI / 2;
      group.add(lace);
    }
  }
  
  function createRunningShoeModel(group) {
    // Streamlined body
    const mainGeometry = new THREE.CapsuleGeometry(0.35, 2.1, 16, 32);
    const mainMaterial = new THREE.MeshStandardMaterial({
      color: currentColor,
      metalness: 0.1,
      roughness: 0.6,
      envMapIntensity: 1.0,
      transparent: false,
      opacity: 1.0
    });
    const mainMesh = new THREE.Mesh(mainGeometry, mainMaterial);
    mainMesh.rotation.z = Math.PI / 2;
    mainMesh.scale.set(1, 1, 0.65);
    group.add(mainMesh);
    
    // Athletic sole
    const soleGeometry = new THREE.BoxGeometry(2.3, 0.2, 0.75);
    const soleMaterial = new THREE.MeshStandardMaterial({
      color: 0x222222,
      metalness: 0.1,
      roughness: 0.9,
      transparent: false,
      opacity: 1.0
    });
    const sole = new THREE.Mesh(soleGeometry, soleMaterial);
    sole.position.set(0, -0.45, 0);
    group.add(sole);
    
    // Air vents
    for (let i = 0; i < 8; i++) {
      const ventGeometry = new THREE.CylinderGeometry(0.04, 0.04, 0.5, 8);
      const ventMaterial = new THREE.MeshStandardMaterial({
        color: 0x666666,
        metalness: 0.8,
        roughness: 0.2,
        transparent: false,
        opacity: 1.0
      });
      const vent = new THREE.Mesh(ventGeometry, ventMaterial);
      const angle = (i / 8) * Math.PI * 2;
      vent.position.set(
        Math.cos(angle) * 0.25,
        Math.sin(angle) * 0.1,
        Math.sin(i * 0.5) * 0.15
      );
      vent.rotation.x = Math.PI / 2;
      group.add(vent);
    }
  }
  
  function createBootModel(group) {
    // Boot shaft
    const bootGeometry = new THREE.CylinderGeometry(0.35, 0.4, 2.2, 12);
    const bootMaterial = new THREE.MeshStandardMaterial({
      color: currentColor,
      metalness: 0.05,
      roughness: 0.8,
      envMapIntensity: 0.8,
      transparent: false,
      opacity: 1.0
    });
    const bootMesh = new THREE.Mesh(bootGeometry, bootMaterial);
    bootMesh.rotation.z = Math.PI / 2;
    bootMesh.position.set(0, 0.1, 0);
    bootMesh.scale.set(1, 1, 0.75);
    group.add(bootMesh);

    // Heavy sole
    const soleGeometry = new THREE.BoxGeometry(2.4, 0.25, 0.85);
    const soleMaterial = new THREE.MeshStandardMaterial({
      color: 0x2a2a2a,
      metalness: 0.1,
      roughness: 0.95,
      transparent: false,
      opacity: 1.0
    });
    const sole = new THREE.Mesh(soleGeometry, soleMaterial);
    sole.position.set(0, -0.5, 0);
    group.add(sole);
  }
  
  function createDressShoeModel(group) {
    // Elegant body
    const mainGeometry = new THREE.CapsuleGeometry(0.3, 1.9, 16, 32);
    const mainMaterial = new THREE.MeshStandardMaterial({
      color: currentColor,
      metalness: 0.3,
      roughness: 0.4,
      envMapIntensity: 1.2,
      transparent: false,
      opacity: 1.0
    });
    const mainMesh = new THREE.Mesh(mainGeometry, mainMaterial);
    mainMesh.rotation.z = Math.PI / 2;
    mainMesh.scale.set(1, 1, 0.6);
    group.add(mainMesh);
    
    // Thin sole
    const soleGeometry = new THREE.BoxGeometry(2.0, 0.08, 0.65);
    const soleMaterial = new THREE.MeshStandardMaterial({
      color: 0x1a1a1a,
      metalness: 0.8,
      roughness: 0.2,
      transparent: false,
      opacity: 1.0
    });
    const sole = new THREE.Mesh(soleGeometry, soleMaterial);
    sole.position.set(0, -0.35, 0);
    group.add(sole);
  }
  
  function createHighTopModel(group) {
    // High top body
    const mainGeometry = new THREE.CylinderGeometry(0.4, 0.45, 2.5, 12);
    const mainMaterial = new THREE.MeshStandardMaterial({
      color: currentColor,
      metalness: 0.1,
      roughness: 0.7,
      envMapIntensity: 1.0,
      transparent: false,
      opacity: 1.0
    });
    const mainMesh = new THREE.Mesh(mainGeometry, mainMaterial);
    mainMesh.rotation.z = Math.PI / 2;
    mainMesh.position.set(0, 0.2, 0);
    mainMesh.scale.set(1, 1, 0.7);
    group.add(mainMesh);

    // Platform sole
    const soleGeometry = new THREE.BoxGeometry(2.3, 0.3, 0.8);
    const soleMaterial = new THREE.MeshStandardMaterial({
      color: 0x333333,
      metalness: 0.1,
      roughness: 0.9,
      transparent: false,
      opacity: 1.0
    });
    const sole = new THREE.Mesh(soleGeometry, soleMaterial);
    sole.position.set(0, -0.6, 0);
    group.add(sole);
  }
  
  function updateModelMaterial() {
    if (!currentModel) return;
    
    currentModel.traverse((child) => {
      if (child.isMesh && child.material && child.material.color) {
        child.material.color.copy(currentColor);
        child.material.needsUpdate = true;
      }
    });
  }
  
  function initColorPicker() {
    const colorArea = document.getElementById('color-area');
    const colorSlider = document.getElementById('color-slider');
    const areaThumb = document.getElementById('area-thumb');
    const sliderThumb = document.getElementById('slider-thumb');
    const colorSwatch = document.getElementById('color-swatch');
    
    if (!colorArea || !colorSlider || !areaThumb || !sliderThumb || !colorSwatch) {
      console.error('Color picker elements not found');
      return;
    }
    
    let isDraggingArea = false;
    let isDraggingSlider = false;
    
    function updateColor() {
      const color = hslToRgb(hue, saturation, lightness);
      currentColor.setRGB(color.r, color.g, color.b);
      
      const hex = '#' + currentColor.getHexString().toUpperCase();
      colorSwatch.style.backgroundColor = hex;
      
      updateModelMaterial();
      console.log('Color updated:', hex);
    }
    
    function hslToRgb(h, s, l) {
      const c = (1 - Math.abs(2 * l - 1)) * s;
      const x = c * (1 - Math.abs((h / 60) % 2 - 1));
      const m = l - c / 2;
      
      let r, g, b;
      if (h >= 0 && h < 60) {
        r = c; g = x; b = 0;
      } else if (h >= 60 && h < 120) {
        r = x; g = c; b = 0;
      } else if (h >= 120 && h < 180) {
        r = 0; g = c; b = x;
      } else if (h >= 180 && h < 240) {
        r = 0; g = x; b = c;
      } else if (h >= 240 && h < 300) {
        r = x; g = 0; b = c;
      } else {
        r = c; g = 0; b = x;
      }
      
      return { r: r + m, g: g + m, b: b + m };
    }
    
    // Color area events
    function handleAreaInteraction(e) {
      const rect = colorArea.getBoundingClientRect();
      const clientX = e.touches ? e.touches[0].clientX : e.clientX;
      const clientY = e.touches ? e.touches[0].clientY : e.clientY;
      
      const x = Math.max(0, Math.min(1, (clientX - rect.left) / rect.width));
      const y = Math.max(0, Math.min(1, (clientY - rect.top) / rect.height));
      
      saturation = x;
      lightness = 1 - y;
      
      areaThumb.style.left = (x * 100) + '%';
      areaThumb.style.top = (y * 100) + '%';
      
      updateColor();
    }
    
    colorArea.addEventListener('mousedown', (e) => {
      isDraggingArea = true;
      handleAreaInteraction(e);
      e.preventDefault();
    });
    
    colorArea.addEventListener('touchstart', (e) => {
      isDraggingArea = true;
      handleAreaInteraction(e);
      e.preventDefault();
    });
    
    document.addEventListener('mousemove', (e) => {
      if (isDraggingArea) {
        handleAreaInteraction(e);
        e.preventDefault();
      }
    });
    
    document.addEventListener('touchmove', (e) => {
      if (isDraggingArea) {
        handleAreaInteraction(e);
        e.preventDefault();
      }
    });
    
    // Color slider events
    function handleSliderInteraction(e) {
      const rect = colorSlider.getBoundingClientRect();
      const clientX = e.touches ? e.touches[0].clientX : e.clientX;
      const x = Math.max(0, Math.min(1, (clientX - rect.left) / rect.width));
      
      hue = x * 360;
      sliderThumb.style.left = (x * 100) + '%';
      
      const hslColor = `hsl(${hue}, 100%, 50%)`;
      colorArea.style.background = `linear-gradient(to bottom, transparent, #000), linear-gradient(to right, #fff, ${hslColor})`;
      
      updateColor();
    }
    
    colorSlider.addEventListener('mousedown', (e) => {
      isDraggingSlider = true;
      handleSliderInteraction(e);
      e.preventDefault();
    });
    
    colorSlider.addEventListener('touchstart', (e) => {
      isDraggingSlider = true;
      handleSliderInteraction(e);
      e.preventDefault();
    });
    
    document.addEventListener('mousemove', (e) => {
      if (isDraggingSlider) {
        handleSliderInteraction(e);
        e.preventDefault();
      }
    });
    
    document.addEventListener('touchmove', (e) => {
      if (isDraggingSlider) {
        handleSliderInteraction(e);
        e.preventDefault();
      }
    });
    
    document.addEventListener('mouseup', () => {
      isDraggingArea = false;
      isDraggingSlider = false;
    });
    
    document.addEventListener('touchend', () => {
      isDraggingArea = false;
      isDraggingSlider = false;
    });
    
    // Initialize with better starting position
    sliderThumb.style.left = '33%';
    areaThumb.style.left = '50%';
    areaThumb.style.top = '30%';
    
    const hslColor = `hsl(${hue}, 100%, 50%)`;
    colorArea.style.background = `linear-gradient(to bottom, transparent, #000), linear-gradient(to right, #fff, ${hslColor})`;
    
    updateColor();
    console.log('Color picker initialized');
  }
  
  function initMaterialControls() {
    const smoothnessSlider = document.getElementById('smoothness-slider');
    const smoothnessValue = document.getElementById('smoothness-value');
    const metalnessSlider = document.getElementById('metalness-slider');
    const metalnessValue = document.getElementById('metalness-value');
    
    if (!smoothnessSlider || !smoothnessValue || !metalnessSlider || !metalnessValue) {
      console.error('Material control elements not found');
      return;
    }
    
    // Enhanced smoothness control
    smoothnessSlider.addEventListener('input', (e) => {
      const value = parseInt(e.target.value);
      smoothnessValue.textContent = value + '%';
      
      if (currentModel) {
        currentModel.traverse((child) => {
          if (child.isMesh && child.material) {
            child.material.roughness = 1 - (value / 100);
            child.material.needsUpdate = true;
          }
        });
      }
      console.log('Smoothness updated:', value + '%');
    });
    
    // Enhanced metalness control
    metalnessSlider.addEventListener('input', (e) => {
      const value = parseInt(e.target.value);
      metalnessValue.textContent = value + '%';
      
      if (currentModel) {
        currentModel.traverse((child) => {
          if (child.isMesh && child.material) {
            child.material.metalness = value / 100;
            child.material.needsUpdate = true;
          }
        });
      }
      console.log('Metalness updated:', value + '%');
    });
    
    console.log('Material controls initialized');
  }
  
  // Enhanced desktop layout functions
  function showContactDesktop() {
    if (isMobile) {
      createContactModal();
      document.getElementById('contact-modal').style.display = 'block';
      return;
    }
    
    if (isPortfolioOpen) hidePortfolioDesktop();
    
    isContactOpen = true;
    container.classList.add('contact-mode');
    contactPanel.classList.add('active');
    
    camera.aspect = (window.innerWidth * 0.5) / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth * 0.5, window.innerHeight);
  }
  
  function hideContactDesktop() {
    isContactOpen = false;
    container.classList.remove('contact-mode');
    contactPanel.classList.remove('active');
    
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
  }
  
  function showPortfolioDesktop() {
    if (isMobile) {
      createWorkModal();
      document.getElementById('work-modal').style.display = 'block';
      return;
    }
    
    if (isContactOpen) hideContactDesktop();
    
    isPortfolioOpen = true;
    container.classList.add('portfolio-mode');
    portfolioPanel.classList.add('active');
    
    camera.aspect = (window.innerWidth * 0.5) / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth * 0.5, window.innerHeight);
  }
  
  function hidePortfolioDesktop() {
    isPortfolioOpen = false;
    container.classList.remove('portfolio-mode');
    portfolioPanel.classList.remove('active');
    
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
    
    document.getElementById('portfolio-password-section').style.display = 'block';
    document.getElementById('portfolio-content').style.display = 'none';
    document.getElementById('portfolio-password').value = '';
    document.getElementById('portfolio-error').style.display = 'none';
  }
  
  function initEventListeners() {
    // Shoe selection from menu
    shoeOptions.forEach(option => {
      option.addEventListener('click', () => {
        const modelName = option.dataset.model;
        showProductView(modelName);
      });
    });
    
    // Back to menu
    backToMenu.addEventListener('click', () => {
      showMenuView();
    });
    
    // Back to home
    backHome.addEventListener('click', () => {
      window.location.href = 'index.html';
    });
    
    window.addEventListener('resize', onWindowResize);
    
    document.addEventListener('mousemove', (e) => {
      document.documentElement.style.setProperty('--mouse-x', `${e.clientX}px`);
      document.documentElement.style.setProperty('--mouse-y', `${e.clientY}px`);
    });
    
    const brandContainers = document.querySelectorAll('.brand-container');
    brandContainers.forEach(brandContainer => {
      if (window.innerWidth > 768) {
        let hoverTimeout;
        
        brandContainer.addEventListener('mouseenter', () => {
          clearTimeout(hoverTimeout);
        });
        
        brandContainer.addEventListener('mouseleave', () => {
          hoverTimeout = setTimeout(() => {
            // Menu will hide automatically via CSS
          }, 200);
        });
      }

      // Navigation links
      const contactLink = brandContainer.querySelector('a[href="#contact"]');
      const workLink = brandContainer.querySelector('a[href="#work"]');
      
      if (contactLink) {
        contactLink.addEventListener('click', (e) => {
          e.preventDefault();
          showContactDesktop();
          brandContainer.classList.remove('active');
        });
      }
      
      if (workLink) {
        workLink.addEventListener('click', (e) => {
          e.preventDefault();
          showPortfolioDesktop();
          brandContainer.classList.remove('active');
        });
      }
      
      // Enhanced mobile navigation
      const brandTitle = brandContainer.querySelector('.brand-title');
      if (isMobile && brandTitle) {
        brandTitle.addEventListener('click', (e) => {
          e.stopPropagation();
          brandContainer.classList.toggle('active');
        });
        
        document.addEventListener('click', (e) => {
          if (!e.target.closest('.brand-container')) {
            brandContainer.classList.remove('active');
          }
        });
      }
    });
    
    // Enhanced portfolio password handling
    const portfolioPassword = document.getElementById('portfolio-password');
    const portfolioSubmit = document.getElementById('portfolio-submit');
    const portfolioError = document.getElementById('portfolio-error');
    
    if (portfolioPassword && portfolioSubmit && portfolioError) {
      function checkPortfolioPassword() {
        const password = portfolioPassword.value;
        if (password === 'privateclientonly') {
          document.getElementById('portfolio-password-section').style.display = 'none';
          document.getElementById('portfolio-content').style.display = 'block';
          portfolioError.style.display = 'none';
        } else {
          portfolioError.style.display = 'block';
          portfolioPassword.value = '';
          // Add shake animation for better UX
          portfolioError.style.animation = 'shake 0.5s ease-in-out';
          setTimeout(() => {
            portfolioError.style.animation = '';
          }, 500);
        }
      }
      
      portfolioSubmit.addEventListener('click', checkPortfolioPassword);
      portfolioPassword.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          checkPortfolioPassword();
        }
      });
    }
    
    // Panel close buttons
    const contactClose = document.querySelector('.contact-close');
    const portfolioClose = document.querySelector('.portfolio-close');
    
    if (contactClose) contactClose.addEventListener('click', hideContactDesktop);
    if (portfolioClose) portfolioClose.addEventListener('click', hidePortfolioDesktop);
  }
  
  function onWindowResize() {
    const wasMobile = isMobile;
    checkMobile();
    
    // Handle mobile/desktop transition
    if (wasMobile !== isMobile) {
      if (isMobile && (isPortfolioOpen || isContactOpen)) {
        hideContactDesktop();
        hidePortfolioDesktop();
      }
    }
    
    if ((isPortfolioOpen || isContactOpen) && !isMobile) {
      camera.aspect = (window.innerWidth * 0.5) / window.innerHeight;
      renderer.setSize(window.innerWidth * 0.5, window.innerHeight);
    } else {
      camera.aspect = window.innerWidth / window.innerHeight;
      renderer.setSize(window.innerWidth, window.innerHeight);
    }
    
    camera.updateProjectionMatrix();
  }
  
  function animate() {
    if (isInProductView) {
      requestAnimationFrame(animate);
      controls.update();
      renderer.render(scene, camera);
    }
  }
  
  function getUserLocation() {
    try {
      const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
      const parts = timezone.split('/');
      const city = parts[parts.length - 1].replace(/_/g, ' ');
      
      cityElements.forEach(el => {
        el.textContent = city;
      });
      
      updateDate();
      setInterval(updateDate, 1000);
    } catch (error) {
      console.error('Error getting location:', error);
      cityElements.forEach(el => {
        el.textContent = 'Location unavailable';
      });
    }
  }
  
  function updateDate() {
    try {
      const now = new Date();
      const dateOptions = {
        weekday: "short",
        month: "short",
        day: "2-digit",
        hour: "numeric",
        minute: "2-digit",
        second: "2-digit",
        hour12: true
      };
      
      const dateFormatter = new Intl.DateTimeFormat("en-US", dateOptions);
      const formattedDate = dateFormatter.format(now);
      
      dateElements.forEach(el => {
        el.textContent = formattedDate;
      });
    } catch (error) {
      console.error("Error updating date:", error);
    }
  }
  
  function createContactModal() {
    if (document.getElementById('contact-modal')) return;
    
    const modal = document.createElement('div');
    modal.id = 'contact-modal';
    modal.className = 'modal';
    
    modal.innerHTML = `
      <button class="close-button">&times;</button>
      <div class="modal-content">
        <h1>Contact</h1>
        <p>Get in touch with Robin Gabriel Design</p>
        <div class="contact-links">
          <a href="mailto:robingabrieldesign@gmail.com" class="contact-link">
            <span>📧</span>
            <span>robingabrieldesign@gmail.com</span>
          </a>
          <a href="https://www.instagram.com/robingabrieldesign/" target="_blank" class="contact-link">
            <span>📷</span>
            <span>@robingabrieldesign</span>
          </a>
        </div>
      </div>
    `;
    
    document.body.appendChild(modal);
    
    const closeButton = modal.querySelector('.close-button');
    
    closeButton.addEventListener('click', () => {
      modal.style.display = 'none';
    });
    
    modal.addEventListener('click', (e) => {
      if (e.target === modal) {
        modal.style.display = 'none';
      }
    });
  }
  
  function createWorkModal() {
    if (document.getElementById('work-modal')) return;
    
    const modal = document.createElement('div');
    modal.id = 'work-modal';
    modal.className = 'modal';
    
    modal.innerHTML = `
      <button class="close-button">&times;</button>
      <div class="modal-content">
        <div id="password-section">
          <h1>Enter Password</h1>
          <div class="password-form">
            <input type="password" id="work-password" class="password-input" placeholder="Enter password">
            <button id="password-submit" class="password-submit">ACCESS</button>
            <div id="password-error" class="error-message" style="display: none;">Incorrect password</div>
          </div>
        </div>
        <div id="portfolio-section" style="display: none;">
          <h1>Portfolio</h1>
          <div class="portfolio-gallery">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_01 Large.jpeg" alt="Portfolio Page 1" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_03 Large.jpeg" alt="Portfolio Page 3" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_04 Large.jpeg" alt="Portfolio Page 4" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_05 Large.jpeg" alt="Portfolio Page 5" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_06 Large.jpeg" alt="Portfolio Page 6" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_07 Large.jpeg" alt="Portfolio Page 7" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_08 Large.jpeg" alt="Portfolio Page 8" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_09 Large.jpeg" alt="Portfolio Page 9" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_10 Large.jpeg" alt="Portfolio Page 10" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_11 Large.jpeg" alt="Portfolio Page 11" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_12 Large.jpeg" alt="Portfolio Page 12" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_13 Large.jpeg" alt="Portfolio Page 13" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_14 Large.jpeg" alt="Portfolio Page 14" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_15 Large.jpeg" alt="Portfolio Page 15" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_16 Large.jpeg" alt="Portfolio Page 16" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_17 Large.jpeg" alt="Portfolio Page 17" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_18 Large.jpeg" alt="Portfolio Page 18" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_19 Large.jpeg" alt="Portfolio Page 19" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_20 Large.jpeg" alt="Portfolio Page 20" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_21 Large.jpeg" alt="Portfolio Page 21" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_22 Large.jpeg" alt="Portfolio Page 22" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_23 Large.jpeg" alt="Portfolio Page 23" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_24 Large.jpeg" alt="Portfolio Page 24" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_25 Large.jpeg" alt="Portfolio Page 25" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_26 Large.jpeg" alt="Portfolio Page 26" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_27 Large.jpeg" alt="Portfolio Page 27" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_28 Large.jpeg" alt="Portfolio Page 28" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_29 Large.jpeg" alt="Portfolio Page 29" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_30 Large.jpeg" alt="Portfolio Page 30" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_31 Large.jpeg" alt="Portfolio Page 31" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_32 Large.jpeg" alt="Portfolio Page 32" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_33 Large.jpeg" alt="Portfolio Page 33" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_34 Large.jpeg" alt="Portfolio Page 34" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_35 Large.jpeg" alt="Portfolio Page 35" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_36 Large.jpeg" alt="Portfolio Page 36" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_37 Large.jpeg" alt="Portfolio Page 37" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_38 Large.jpeg" alt="Portfolio Page 38" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_39 Large.jpeg" alt="Portfolio Page 39" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_40 Large.jpeg" alt="Portfolio Page 40" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_41 Large.jpeg" alt="Portfolio Page 41" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_42 Large.jpeg" alt="Portfolio Page 42" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_43 Large.jpeg" alt="Portfolio Page 43" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_44 Large.jpeg" alt="Portfolio Page 44" class="portfolio-image">
            <img src="PORTFOLIO/ROBIN_USC_PORTFOLIO_Page_45 Large.jpeg" alt="Portfolio Page 45" class="portfolio-image">
          </div>
        </div>
      </div>
    `;
    
    document.body.appendChild(modal);
    
    const closeButton = modal.querySelector('.close-button');
    const passwordInput = modal.querySelector('#work-password');
    const passwordSubmit = modal.querySelector('#password-submit');
    const passwordError = modal.querySelector('#password-error');
    const passwordSection = modal.querySelector('#password-section');
    const portfolioSection = modal.querySelector('#portfolio-section');
    
    function checkPassword() {
      const password = passwordInput.value;
      if (password === 'privateclientonly') {
        passwordSection.style.display = 'none';
        portfolioSection.style.display = 'block';
        passwordError.style.display = 'none';
      } else {
        passwordError.style.display = 'block';
        passwordInput.value = '';
      }
    }
    
    passwordSubmit.addEventListener('click', checkPassword);
    
    passwordInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        checkPassword();
      }
    });
    
    closeButton.addEventListener('click', () => {
      modal.style.display = 'none';
      passwordSection.style.display = 'block';
      portfolioSection.style.display = 'none';
      passwordInput.value = '';
      passwordError.style.display = 'none';
    });
  }
});

// Add shake animation for error feedback
const style = document.createElement('style');
style.textContent = `
  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
  }
`;
document.head.appendChild(style);
</script>
</body>
</html>